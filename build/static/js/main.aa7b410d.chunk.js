(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(10),o=n.n(u),s=(n(22),n(15)),i=n(11),l=n(12),c=n(14),m=n(13),d=n(16),f=function(e){var t=e.persons,n=e.deletePerson;return r.a.createElement("div",null,r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n(e.id)},"poista")))}))))},h=function(e){var t=e.statusName,n=e.statusNumber,a=e.changeNumber,u=e.changeName,o=e.add;return r.a.createElement("div",null,r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},p=function(e){var t=e.status,n=e.change;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4 ",r.a.createElement("input",{value:t,onChange:n}))},v=n(2),b=n.n(v),g="/api/persons",N={getPersons:function(){return b.a.get(g).then(function(e){return e.data})},create:function(e){return b.a.post(g,e).then(function(e){return e.data})},remove:function(e){return b.a.delete("".concat(g,"/").concat(e)).then(function(e){return e.data})},update:function(e,t){return b.a.put("".concat(g,"/").concat(e),t).then(function(e){return e.data})}},w=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},E=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber};if(""===n.state.newName||""===n.state.newNumber)return n.setState({error:"kumpikaan kentt\xe4 ei saa olla tyhj\xe4"}),void setTimeout(function(){n.setState({error:null})},5e3);var a=n.state.persons.find(function(e){return e.name===n.state.newName});a?n.updatePhone(a.id):N.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",error:"lis\xe4ttiin ".concat(t.name)}),setTimeout(function(){n.setState({error:null})},5e3)})},n.updatePhone=function(e){var t=n.state.newName;if(window.confirm("".concat(t," on jo olemassa, haluatko antaa uuden numeron"))){var a=n.state.persons.find(function(t){return t.id===e}),r=Object(s.a)({},a,{number:n.state.newNumber});N.update(e,r).then(function(t){n.setState({persons:n.state.persons.map(function(t){return t.id!==e?t:r}),newName:"",newNumber:"",error:"".concat(r.name," numero p\xe4ivitetty")}),setTimeout(function(){n.setState({error:null})},5e3)})}else n.setState({newName:"",newNumber:""})},n.deletePerson=function(e){return function(){var t=n.state.persons.find(function(t){return t.id===e});window.confirm("poistetaanko "+t.name)&&N.remove(t.id).then(function(e){n.setState({persons:n.state.persons.filter(function(e){return e!==t}),newName:"",newNumber:"",error:"".concat(t.name," poistettiin onnistuneesti")}),console.log("poistettu"),setTimeout(function(){n.setState({error:null})},5e3)}).catch(function(e){console.log("poistaminen ep\xe4onnistui")})}},n.handleNameChange=function(e){console.log(e.target.value),n.setState({newName:e.target.value})},n.handleNumberChange=function(e){console.log(e.target.value),n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){console.log(e.target.value),n.setState({filter:e.target.value})},n.state={persons:[],newName:"",newNumber:"",filter:"",error:null},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.getPersons().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toString().toLowerCase().includes(e.state.filter)});return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(w,{message:this.state.error}),r.a.createElement(p,{status:this.state.filter,change:this.handleFilterChange}),r.a.createElement(h,{statusName:this.state.name,statusNumber:this.state.number,changeName:this.handleNameChange,changeNumber:this.handleNumberChange,add:this.addPerson}),r.a.createElement(f,{persons:t,deletePerson:this.deletePerson}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.aa7b410d.chunk.js.map